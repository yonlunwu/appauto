engine:
  common:
    model-path: /mnt/data/models/Kimi-K2-Instruct-GPU-weight
    served-model-name: Kimi-K2-Instruct-GPU-weight
    trust-remote-code: true
    disable-shared-experts-fusion: true
    enable-p2p-check: true
    kt-weight-path: /mnt/data/models/Kimi-K2-Instruct-CPU-weight
    kt-method: AMXINT4
    kt-threadpool-count: 2
    mem-fraction-static: 0.98

  dynamic:
    kt-cpuinfer: 80

  correct_common:
    max-running-requests: 50
    max-total-tokens: 50000

  correct:
    1:
      tensor-parallel-size: 1
      kt-num-gpu-experts: 1
    2:
      tensor-parallel-size: 2
      kt-num-gpu-experts: 45
    4:
      tensor-parallel-size: 4
      kt-num-gpu-experts: 101
    8:
      tensor-parallel-size: 8
      kt-num-gpu-experts: 212

  perf_common:
    max-running-requests: 37
    max-total-tokens: 37000
    kt-max-deferred-experts-per-token: 2
    chunked-prefill-size: 4096
    enable-mixed-chunk: true
    attention-backend: flashinfer
    disable-radix-cache: true
    disable-chunked-prefix-cache: true

  perf:
    1:
      tensor-parallel-size: 1
      kt-num-gpu-experts: 10
    2:
      tensor-parallel-size: 2
      kt-num-gpu-experts: 45
      dp: 2
      enable-dp-attention: true
    4:
      tensor-parallel-size: 4
      kt-num-gpu-experts: 110
      dp: 2
      enable-dp-attention: true
    8:
      tensor-parallel-size: 8
      kt-num-gpu-experts: 235
      dp: 2
      enable-dp-attention: true

amaas:
  correct:
    1: default
    2: default
    4: default
    8: default

  perf_common:
    max_total_tokens: 37000
    backend_parameters:
      kt-max-deferred-experts-per-token: 2
      chunked-prefill-size: 4096
      enable-mixed-chunk: ''
      attention-backend: flashinfer
      disable-radix-cache: ''
      disable-chunked-prefix-cache: ''

  perf:
    1:
      backend_parameters:
        kt-num-gpu-experts: 10
    2:
      backend_parameters:
        dp: 2
        enable-dp-attention: ''
        kt-num-gpu-experts: 45
    4:
      backend_parameters:
        dp: 2
        enable-dp-attention: ''
        kt-num-gpu-experts: 110
    8:
      backend_parameters:
        dp: 2
        enable-dp-attention: ''
        kt-num-gpu-experts: 235
